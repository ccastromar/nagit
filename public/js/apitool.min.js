let app=(function(){let comboSel=document.getElementById("comboapi");let info=document.getElementById("info");let help=document.getElementById("help");let language="en";let divTop=document.querySelector("#scrollTop");function d(){if(window.scrollY>=300){divTop.classList.add("visible")}else{divTop.classList.remove("visible")}}function g(){if(window.scrollY!=0){setTimeout(function(){window.scrollTo(0,window.scrollY-30);g()},5)}}window.addEventListener("scroll",d);divTop.addEventListener("click",g);function b(j){let allInputs=document.getElementsByTagName("INPUT");for(let i=0;i<allInputs.length;i++){let inp=allInputs[i];if(inp.type==="text"){if(inp.id==="nishost"||inp.id==="nisport"){continue}inp.style.backgroundColor="#dddddd";inp.disabled=true}}for(let i=0;i<j.length;i++){let e=document.getElementById(j[i]);e.disabled=false;e.style.backgroundColor="#d0f0d0"}}function c(j){info.innerHTML='<i class="fa fa-info-circle"></i> '+j}function a(j){let i=comboSel.value;if(i==-1){return}let obj=apitool.comboList[i];let inputText=obj.input;b(inputText);c(obj.info[j])}function h(){let i=comboSel.value;if(i==-1){return}let obj=apitool.comboList[i];let fn=obj.fn;apitool[fn]()}function f(){help.innerHTML=""}return{selchange:a,selcall:h,closeHelp:f}})();
/*!
 * API Tool Library for NEM API. It validates the input data, sends GET or POST requests and pretty prints the response.
 * Copyright (c) 2018 Carlos Castro Martos
 * Released under the MIT license
 * Date: 2018-11-16
 */
;let apitool=(function(){let version="1.0.0";let language="en";const J=["Unknown status","NIS is stopped","NIS is starting","NIS is running","NIS is booting the local node (implies NIS is running)","The local node is booted (implies NIS is running)","The local node is synchronized (implies NIS is running and the local node is booted)","NIS local node does not see any remote NIS node (implies running and booted)","NIS is currently loading the block chain from the database. In this state NIS cannot serve any requests"];let multiLabel={en:{ERR_NO_RESP:"No response from server",ERR_JSON:"There was en error parsing the response",HIST_DATE:"Date",HIST_FUNC:"Function",HIST_STAT:"Status",HIST_IN:"Input",HIST_OUT:"Output"},es:{ERR_NO_RESP:"No hubo respuesta del servidor",ERR_JSON:"Hubo un error parseando la respuesta",HIST_DATE:"Fecha",HIST_FUNC:"FunciÃ³n",HIST_STAT:"Estado",HIST_IN:"Entrada",HIST_OUT:"Salida"}};function y(ab){return multiLabel[language][ab]}let comboList=[{fn:"currentBlock",input:[],info:{en:"Gets current block height",es:"Obtiene el nÃºmero de bloque actual"}},{fn:"getBlock",input:["blocknumber"],info:{en:"Gets block data at height",es:"Obtiene los datos del bloque para un nÃºmero de bloque dado"}},{fn:"getLastNamespaces",input:["pagesize"],info:{en:"Gets last namespaces created in nem. You must enter a pagesize from 25 to 100 elements",es:"Obtiene los Ãºltimos namespaces creados. Debe informar un total de 25 a 100 elementos por pÃ¡gina"}},{fn:"generateAddress",input:[],info:{en:"Generates wallet data (address, public & private keys). This will be saved for later testing.",es:"Genera los datos de una wallet (address, clave pÃºblica y privada). Esto se guardarÃ¡ para hacer pruebas"}},{fn:"getAccount",input:["address"],info:{en:"Gets account data for a NEM address",es:"Obtiene los datos de una cuenta para una NEM address concreta"}},{fn:"getNamespacesFromAddress",input:["address"],info:{en:"Gets namespaces belonging to a NEM address",es:"Obtiene los namespaces que pertenecen a una NEM address concreta"}},{fn:"getMosaicsFromAddress",input:["address"],info:{en:"Gets mosaics belonging to a NEM address",es:"Obtiene los mosaicos que pertenecen a una NEM address concreta"}},{fn:"getMosaicsFromNamespace",input:["namespace"],info:{en:"Gets mosaics belonging to a namespace",es:"Obtiene los mosaicos que pertenecen a un namespace dado"}},{fn:"getStatusServer",input:[],info:{en:"Gets NIS Server status",es:"Obtiene el estado del servidor NIS"}},{fn:"getIncomingTransactionsFromAddress",input:["address"],info:{en:"Gets last 25 incoming transactions with NEM address as recipient",es:"Obtiene las Ãºltimas 25 transacciones que tienen una NEM address como destinatario"}},{fn:"getOutgoingTransactionsFromAddress",input:["address"],info:{en:"Gets last 25 outgoing transactions with NEM address as sender",es:"Obtiene las Ãºltimas 25 transacciones que ha enviado una NEM address"}},{fn:"getHarvestingInfoFromAddress",input:["address"],info:{en:"Gets harvesting information for the NEM address",es:"Obtiene informaciÃ³n de recolecciÃ³n (harvesting) de una NEM address dada"}},{fn:"getTenBlocksAfterHeight",input:["blocknumber"],info:{en:"Gets 10 block data after a block height",es:"Obtiene los datos de 10 bloques siguientes a un nÃºmero de bloque dado"}},{fn:"getNamespace",input:["namespace"],info:{en:"Gets namespace definition",es:"Obtiene la definiciÃ³n de un namespace"}},{fn:"prepareTransaction",input:["amount","recipient","publickey","privatekey"],info:{en:"Only for testing with your local node. Never expose or share your private key with untrusted websites or unknown NIS Nodes",es:"SÃ³lo para pruebas con su nodo local. Nunca muestre o comparta su clave privada con sitios web que no confÃ­a o nodos NIS desconocidos"}},{fn:"generateQR",input:["memo","amount","address"],info:{en:"Generates a QR code for scanning given a NEM address, an amount and a memo",es:"Genera un cÃ³digo QR para escanear dada una NEM address, una cantidad y un mensaje"}},{fn:"getNodeInformation",input:[],info:{en:"Gets basic information about the selected NIS Node",es:"Obtiene informaciÃ³n bÃ¡sica sobre el servidor NIS seleccionado"}},{fn:"getExtendedInfo",input:[],info:{en:"Gets extended information about the selected NIS Node",es:"Obtiene informaciÃ³n ampliada sobre el servidor NIS seleccionado"}},{fn:"getPeerList",input:[],info:{en:"Gets a list of all known nodes in the neighborhood",es:"Obtiene una lista de todos los nodos conocidos cercanos"}},{fn:"getNodeExperiences",input:[],info:{en:"Gets a list of node experiences from another node",es:"Obtiene una lista de experiencias de nodos de otro nodo"}},{fn:"getHeartbeat",input:[],info:{en:"Gets information if a node is up and responsive",es:"Obtiene informaciÃ³n de si el nodo estÃ¡ arrancado y respondiendo"}},{fn:"getAccountFromPK",input:["publickey"],info:{en:"Gets account information from a public key",es:"Obtiene informaciÃ³n de una cuenta a partir de la clave pÃºblica"}},{fn:"lockAccount",input:["privatekey"],info:{en:"Only for local testing. Never exposes your private key. Unlocks an account to enable harvesting",es:"SÃ³lo para pruebas locales. Nunca proporcione su clave privada. Desbloquea una cuenta para activar la recolecciÃ³n (harvesting)"}},{fn:"unlockAccount",input:["privatekey"],info:{en:"Only for local testing. Never exposes your private key. Locks an account to disable harvesting",es:"SÃ³lo para pruebas locales. Nunca proporcione su clave privada. Bloquea una cuenta para desactviar la recolecciÃ³n (harvesting)"}}];const Q=Date.UTC(2015,2,29,0,6,25,0);let url="https://shibuya.supernode.me:7891";let network=document.getElementById("defaultnet");if(network.value==="M"){url="https://shibuya.supernode.me:7891"}else{url="https://nis-testnet.44uk.net:7891"}let historyRequests=[];let output={};let spinner=document.getElementById("spin0");let historyDiv=document.getElementById("historyDiv");let histDetail=document.getElementById("histDetail");let logs=document.getElementById("logs0");let comboSel=document.getElementById("comboapi");let address=document.getElementById("address");let blocknumber=document.getElementById("blocknumber");let namespace=document.getElementById("namespace");let amount=document.getElementById("amount");let publickey=document.getElementById("publickey");let privatekey=document.getElementById("privatekey");let recipient=document.getElementById("recipient");let pagesize=document.getElementById("pagesize");let nishost=document.getElementById("nishost");let nisport=document.getElementById("nisport");let defaultNodeDiv=document.getElementById("defaultNodeDiv");let customNodeDiv=document.getElementById("customNodeDiv");let mainHist=document.getElementById("collapseHistory");let mainNode=document.getElementById("collapseNode");let historyToggle=document.getElementById("historyToggle");let nodeToggle=document.getElementById("nodeToggle");mainHist.classList.add("collapsed");mainNode.classList.add("collapsed");function l(){window.scrollTo(0,0);mainHist.classList.toggle("collapsed")}function M(){window.scrollTo(0,0);mainNode.classList.toggle("collapsed")}historyToggle.addEventListener("click",l);nodeToggle.addEventListener("click",M);function Y(ab){language=ab}function G(){let portNum=7890;try{portNum=parseInt(nisport.value)}catch(ab){}if(nishost.value==""){nishost.focus();return false}if(nisport.value==""){nisport.focus();return false}if(portNum>65535||portNum<=0){nisport.value=7890;nisport.focus();return false}url="http://"+nishost.value+":"+nisport.value;customNodeDiv.classList.add("fa","fa-check-circle");defaultNodeDiv.classList.remove("fa","fa-check-circle")}function W(){return Math.floor((Date.now()/1000)-(Q/1000))}function F(){spinner.classList.add("fa","fa-refresh","fa-spin");spinner.style.marginRight="8px"}function R(){spinner.classList.remove("fa","fa-refresh","fa-spin");spinner.style.marginRight="0px"}function T(ab,ac){F();let xhttp=new XMLHttpRequest();let data={};xhttp.onreadystatechange=function(){if(this.readyState==4&&this.status==200){R();let res=JSON.parse(xhttp.responseText);output=res;if(ac){ac()}g(ab,data,res,"GET",url,this.status,network.value);V(res)}else{if(this.readyState==4&&this.status!=200){R();let res={};let errNoResp={Error:y("ERR_NO_RESP")};let errJson={Error:y("ERR_JSON")};if(this.responseText==""){res=errNoResp}else{try{res=JSON.parse(this.responseText)}catch(ad){res=errJson}}g(ab,data,res,"GET",url,this.status,network.value);V(res)}}};xhttp.open("GET",url+ab,true);xhttp.setRequestHeader("Content-type","application/json; charset=utf-8");xhttp.send()}function I(ae,ad,af){F();const ac={Error:y("ERR_NO_RESP")};const ab={Error:y("ERR_JSON")};let xhttp=new XMLHttpRequest();let dataStr=JSON.stringify(ad);xhttp.onreadystatechange=function(){let res={};if(this.readyState==4&&this.status==200){R();console.log(this.responseText);if(this.responseText==""){res=ab}else{res=JSON.parse(this.responseText)}output=res;if(af){af()}g(ae,ad,res,"POST",url,this.status,network.value);V(res)}else{if(this.readyState==4&&this.status!=200){R();if(this.responseText==""){res=ac}else{try{res=JSON.parse(this.responseText)}catch(ag){res=ab}}g(ae,ad,res,"POST",url,this.status,network.value);V(res)}}};xhttp.open("POST",url+ae,true);xhttp.setRequestHeader("Content-type","application/json; charset=utf-8");xhttp.send(dataStr)}function g(ag,ad,ac,ah,ae,ab,af){let id=historyRequests.length;let fnId=comboSel.value;let fnName=comboList[fnId].fn;let descNet=(af==="M")?"Mainnet":"Testnet";let r={id:id,created:new Date(),fnId:fnId,fnName:fnName,verb:ah,url:ae,uri:ag,input:ad,output:ac,status:ab,network:descNet};let fn=comboList[r.fnId].fn;historyRequests.push(r);D()}function D(){let str='<table class="table-striped table-hover table-fixed" style="height: 150px">';str+='<thead><th style="width:100px !important">'+y("HIST_DATE")+'</th><th style="width:250px !important">'+y("HIST_FUNC")+"</th><th>"+y("HIST_STAT")+"</th><th> </th></tr></thead><tbody>";for(let i=historyRequests.length;i-->0;){let v=historyRequests[i];str+='<tr><td style="width:100px !important">'+v.created.toLocaleDateString()+"</td>";str+='<td style="width:250px !important"><a href="javascript:apitool.loadHistRequest('+i+')">'+v.fnName+"</a></td>";if(v.status===200){str+='<td><span class="text-success">'+v.status+"</span></td>"}else{str+='<td><span class="text-danger">'+v.status+"</span></td>"}str+='<td><i class="fa fa-trash" style="cursor:pointer" onclick="apitool.deleteHist('+i+',this)"></i></td>';str+="</tr>"}str+="</tbody></table>";historyDiv.innerHTML=str}function k(ab){let hist=historyRequests[ab];let str="<strong>"+hist.verb+":</strong> "+hist.uri+"<br>";str+="<strong>"+y("HIST_DATE")+":</strong> "+hist.created.toLocaleString()+"<br>";str+="<strong>"+y("HIST_FUNC")+":</strong> "+hist.fnName+"<br>";str+="<strong>"+y("HIST_STAT")+":</strong> "+hist.status+"<br>";str+="<strong>"+y("HIST_IN")+":</strong> "+JSON.stringify(hist.input)+"<br>";str+="<strong>"+y("HIST_OUT")+":</strong> "+JSON.stringify(hist.output);histDetail.innerHTML=str}function x(ab){historyRequests.splice(ab,1);D();histDetail.innerHTML=""}function V(ab,ac){logs.style.visibility="visible";logs.innerHTML=prettyJSON.htmlTable(ab);document.querySelector("#outputId").scrollIntoView({behavior:"smooth"})}function p(){network=document.getElementById("defaultnet");if(network.value==="M"){url="https://shibuya.supernode.me:7891"}else{url="https://nis-testnet.44uk.net:7891"}nishost.value="";nisport.value="";defaultNodeDiv.classList.add("fa","fa-check-circle");customNodeDiv.classList.remove("fa","fa-check-circle")}function K(){blocknumber.value="";namespace.value="";memo.value="";amount.value="";recipient.value=""}function L(){address.value="";publickey.value="";privatekey.value=""}function X(){logs.innerHTML=""}function H(){T("/chain/height")}function d(){let blq=blocknumber.value;if(blq==""||isNaN(blq)){blocknumber.focus();blocknumber.value="";return false}let blqnum=parseInt(blq);let data={height:blqnum};I("/block/at/public",data)}function A(){let ps=25;if(pagesize.value==""){pagesize.focus();return false}try{ps=parseInt(pagesize.value)}catch(ab){}if(pagesize.value!=""){T("/namespace/root/page?pageSize="+ps)}}function h(){T("/account/generate",aa)}function aa(){if(!S(output)){address.value=output.address;publickey.value=output.publicKey;privatekey.value=output.privateKey}}function C(){let adr=address.value;let sanitizedAdr=adr.toUpperCase().replace(/-|\s/g,"");if(adr==""){address.focus();return false}T("/account/get?address="+sanitizedAdr)}function s(){let pk=publickey.value;if(pk==""){pk.focus();return false}T("/account/get/from-public-key?publicKey="+pk)}function P(){let adr=address.value;let sanitizedAdr=adr.toUpperCase().replace(/-|\s/g,"");if(adr==""){address.focus();return false}T("/account/namespace/page?address="+sanitizedAdr)}function o(){let adr=address.value;let sanitizedAdr=adr.toUpperCase().replace(/-|\s/g,"");if(adr==""){address.focus();return false}T("/account/mosaic/definition/page?address="+sanitizedAdr)}function E(){let spc=namespace.value;if(spc==""){namespace.focus();return false}T("/namespace/mosaic/definition/page?namespace="+spc)}function B(){T("/status")}function m(){let adr=address.value;let sanitizedAdr=adr.toUpperCase().replace(/-|\s/g,"");if(adr==""){address.focus();return false}T("/account/transfers/incoming?address="+sanitizedAdr)}function n(){let adr=address.value;let sanitizedAdr=adr.toUpperCase().replace(/-|\s/g,"");if(adr==""){address.focus();return false}T("/account/transfers/outgoing?address="+sanitizedAdr)}function w(){let adr=address.value;let sanitizedAdr=adr.toUpperCase().replace(/-|\s/g,"");if(adr==""){address.focus();return false}T("/account/harvests?address="+sanitizedAdr)}function Z(){let blq=blocknumber.value;if(blq==""||isNaN(blq)){blocknumber.focus();blocknumber.value="";return false}let blqnum=parseInt(blq);let data={height:blqnum};I("/local/chain/blocks-after",data)}function O(){let spc=namespace.value;if(spc==""){namespace.focus();return false}T("/namespace?namespace="+spc)}function N(ab){if(network.value==="M"){return 1744830464|ab}else{if(network.value==="T"){return 2550136832|ab}}return 1610612736|ab}function S(ab){for(let key in ab){if(ab.hasOwnProperty(key)){return false}}return true}function f(){let amountInt=0;if(amount.value==""){amount.focus();return false}amountInt=parseInt(amount.value);if(recipient==""){recipient.focus();return false}let recipientAdr=recipient.value;let pubkey=publickey.value;if(pubkey==""){publickey.focus();return false}let prvkey=privatekey.value;if(prvkey==""){privatekey.focus();return false}let ts=W();let due=network.value==="T"?60:24*60;let deadline=ts+due*60;const ad="4e454d20415049204578616d706c657320666f72206c6561726e696e67";const ab=500000;const ac=257;let data={transaction:{timeStamp:W(),amount:amountInt,fee:ab,recipient:recipientAdr,type:ac,deadline:deadline,message:{payload:ad,type:1},version:N(1),signer:pubkey,mosaics:[]},privateKey:prvkey};I("/transaction/prepare-announce",data)}function j(){if(address.value==""){address.focus();return false}if(amount.value==""){amount.focus();return false}if(memo.value==""){memo.focus();return false}let data={v:2,type:2,data:{addr:address.value,amount:amount.value,msg:memo.value,name:"QR Code"}};let txt=JSON.stringify(data);let el=kjua({text:txt});let q=logs;if(q.hasChildNodes()){q.removeChild(q.childNodes[0]);q.appendChild(el)}else{q.appendChild(el)}document.querySelector("#outputId").scrollIntoView({behavior:"smooth"})}function u(){T("/node/info")}function a(){T("/node/extended-info")}function c(){T("/node/peer-list/all")}function z(){T("/node/experiences")}function t(){T("/heartbeat")}function U(){if(privatekey.value==""){privatekey.focus();return false}let data={value:privatekey.value};I("/account/lock",data)}function b(){if(privatekey.value==""){privatekey.focus();return false}let data={value:privatekey.value};I("/account/unlock",data)}return{comboList:comboList,init:Y,delInputCommon:K,delInputWallet:L,delOutputdata:X,setNetwork:p,loadHistRequest:k,deleteHist:x,generateAddress:h,getAccount:C,getAccountFromPK:s,lockAccount:U,unlockAccount:b,getNamespacesFromAddress:P,getMosaicsFromAddress:o,getMosaicsFromNamespace:E,currentBlock:H,getBlock:d,getLastNamespaces:A,getStatusServer:B,getNodeInformation:u,getExtendedInfo:a,getPeerList:c,getNodeExperiences:z,getHeartbeat:t,getIncomingTransactionsFromAddress:m,getOutgoingTransactionsFromAddress:n,getHarvestingInfoFromAddress:w,getTenBlocksAfterHeight:Z,getNamespace:O,prepareTransaction:f,generateQR:j,setNISNode:G}})();